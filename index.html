<html>

<head>
	<style>
		.ground {
			margin-top: calc(181px - 106px);
			margin-left: 425px;
		}
		.ground-green {
			position: absolute; 
			top: calc(371px*0.7); 
			left: calc(19px*0.7);
			margin-top: calc(181px - 106px);
			margin-left: 425px;
		}
		.road {
			position: absolute;
		  	top: 26px;
		  	left: calc(1666px*0.7 + -34px);
		  	margin-top: calc(181px - 106px);
		  	margin-left: 425px;

		}
		.zombie-land {
			position: absolute;
			top: 26px;
			left: calc(1666px*0.7 + -34px);
			margin-top: calc(181px - 106px);
			margin-left: 425px;
		}
		.house {
			position: absolute;
			left: -14px;
			top: 0px;
		}
		.sun-panel {
			position: absolute;
			left: 66px; 
			top: 0px;
		}
		.zombie-story-moving {
			position: absolute;
			top: calc(371px*0.7 - 65px);
			left: calc(1659px*0.7);
			margin-top: calc(181px - 106px);
  			margin-left: 425px;
		}
		.zombie-story-eats {
			position: absolute;
			top: calc(371px*0.7 - 65px);
			left: calc(1659px*0.7 - 400px);
			margin-top: calc(181px - 106px);
  			margin-left: 425px;
		}
		.plant-story-moving {
			position: absolute;
			top: calc(371px*0.7);
			left: calc(1659px*0.7 - 740px);
			margin-top: calc(181px - 106px);
			margin-left: 425px;
		}
		.ball-story-moving {
			position: absolute;
			top: calc(371px*0.7);
			left: calc(1659px*0.7 - 660px);
			margin-top: calc(181px - 106px);
  			margin-left: 425px;
		}
		.sun-ball-story {
			position: absolute;
			top: 0;
			left: calc(57px + 406px);
			display: none;
		}
		

	</style>
</head>
<body style="position: relative">

	<img class="ground" src="core-lib/ground.png" style="width: calc(1666px*0.7);">

	<img class="road" src="core-lib/road.png" style="width: calc(1141px*0.7);">

	<img class="zombie-land" src="core-lib/zombie-land.png" style="width: calc(636px*0.7);">

	<img class="ground-green" src="core-lib/ground-green.png" style="width: calc(1659px*0.7);">


	<img class="house" src="core-lib/house.png" style="width: calc(679px*0.7);">

	<img class="sun-panel" src="core-lib/sun-panel.png" style="width: calc(741px*0.7);">



	<img class="plant-story-moving" src="core-lib/plant-stand.png" style="width: calc(132px*0.7);">

	<img class="zombie-story-moving" src="core-lib/zombie-stand.png" style="width: calc(240px*0.7);">


	<img class="zombie-story-eats" src="core-lib/zombie-stand.png" style="width: calc(240px*0.7);">


	<img class="ball-story-moving" src="core-lib/ball.png" style="width: calc(45px*0.7);">

	<img class="sun-ball-story" src="core-lib/sun-ball.png" style="width: calc(164px*0.7);">

	<script>
		(function(){
			let imgArr = ['core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-stand.png', 'core-lib/zombie-movin.png', 'core-lib/zombie-first-attack.png', 'core-lib/zombie-first-attack-closin.png', 'core-lib/zombie-second-attack.png']
			let positionArr = 10

			let imgIndex = 0
			let slidingRight = 0

			setInterval(function(){
				imgIndex = imgIndex+1
				if(imgIndex >= imgArr.length) {
					imgIndex = 0
				}
				slidingRight += 1
				if(slidingRight > 14) {
					slidingRight = 0
				}
				document.querySelector('.zombie-story-moving').src = imgArr[imgIndex]
				document.querySelector('.zombie-story-moving').style.left = `calc(1659px*0.7 - ${slidingRight * 20}px)`
			}, 400)

		})()
;

		(function(){
			let imgArr = ['core-lib/zombie-eat-1.png', 'core-lib/zombie-eat-2.png', 'core-lib/zombie-eat-3.png']
			let imgIndex = 0


			setInterval(function(){
				imgIndex = imgIndex+1
				// console.log(imgIndex)
				if(imgIndex >= imgArr.length) {
					imgIndex = 0
				}
				// console.log(imgArr[imgIndex])
				document.querySelector('.zombie-story-eats').src = imgArr[imgIndex]
			}, 400)
		})()
;

(function(){
	let imgArr = ['core-lib/plant-stand.png', 'core-lib/plant-attack.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png', 'core-lib/plant-stand.png']
	let imgIndex = 0
	let slidingLeft = 0


	setInterval(function(){
		imgIndex = imgIndex+1
		document.querySelector('.ball-story-moving').src = 'core-lib/ball.png'
		// console.log(imgIndex)
		if(imgIndex == 11) {
			setTimeout(function(){
				document.querySelector('.ball-story-moving').src = 'core-lib/ball-attack-closin.png'
			}, 100)
		}
		if(imgIndex > 11) {
			document.querySelector('.ball-story-moving').src = 'core-lib/ball-attack-closin.png'
		}
		if(imgIndex >= imgArr.length) {
			imgIndex = 0
		}
		slidingLeft += 1
		if(slidingLeft > 14) {
			slidingLeft = 0
		}
		// console.log(imgArr[imgIndex])
		document.querySelector('.plant-story-moving').src = imgArr[imgIndex]
		document.querySelector('.ball-story-moving').style.left = `calc(1659px*0.7 - 660px + ${slidingLeft * 44}px)`
	}, 400)
})()

;
let getRandomInt = function(min, max){
	return Math.floor(min + Math.random() * (max - min + 1))
}


let sunSpawnCounter = 0

function SunBall(slidingLeft, slidingTop, instanceId, slidingTopLimit) {
	this.slidingLeft = slidingLeft
	this.slidingTop = slidingTop
	this.instanceId = instanceId
	this.slidingTopLimit = slidingTopLimit

	let element
	this.getElement = function() {
		return element
	}
	this.setElement = function(el) {
		element = el
	}
	this.destroy = function() {
		setTimeout(function(){
			element.remove()
		}, getRandomInt(4, 8) * 200)
	}
	this.animate = function() {
		if(sunBall.animationComplete === false) {
			sunBall.slidingTop += 1
		}
		
		if(sunBall.slidingTop > sunBall.slidingTopLimit) {
			sunBall.slidingTop = sunBall.slidingTopLimit
			sunBall.animationComplete = true
			sunBall.destroy()
		}
		// console.log(imgArr[imgIndex])
		element.style.top = `calc(${sunBall.slidingTop * 20}px)`

		element.style.left = `calc(57px + 406px + ${sunBall.slidingLeft * 37}px)`
		element.style.display = `initial`
	}

	this.animationComplete = false
}

let spawnBall = function() {

	let slidingLeft = getRandomInt(1, 14)
	let SLIDING_TOP_ARR = [18, 22, 26, 30, 34]
	let slidingTopLimit = SLIDING_TOP_ARR[getRandomInt(0, 3)]
	let sunBallInstanceCounter = 0
	let slidingTop = 0


	let newNode = document.querySelector('.sun-ball-story').cloneNode(false)
	newNode.dataset['instanceId'] = `${sunSpawnCounter}`
	
	document.querySelector('body').append(newNode)

	sunBall = new SunBall(slidingLeft, slidingTop, sunBallInstanceCounter, slidingTopLimit)

	sunBall.setElement(newNode)
	return sunBall
}
;
(function(){
	
	let sunBall = spawnBall()
	console.log(sunBall)

	setInterval(function(){
		if(sunBall.animationComplete === false) {
			sunBall.animate()
		} else if(sunBall.animationComplete === true) {
			sunBall = spawnBall()
		}
	}, 200)
})()
;
	</script>

</body>
</html>